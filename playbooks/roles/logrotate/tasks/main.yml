---
- name: Install logrotate
  package:
    name: logrotate
    state: present

- name: Create rsyslog group if needed
  group:
    name: syslog
    state: present

- name: create logrotate application configuration files
  become: true
  template:
    src: 'etc/logrotate.d/application.j2'
    dest: '/etc/logrotate.d/{{ item.name }}'
    owner: root
    group: root
    mode: 0644
  with_items:
    - '{{ logrotate_applications }}'
  tags:
    - logrotate
